# ValueScope - å®Œå…¨å®Ÿè£…ä»•æ§˜æ›¸ï¼ˆAIå†ç¾ç”¨ï¼‰

**ğŸ“… æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ15æ—¥
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Production Ready
**ãƒ‡ãƒ—ãƒ­ã‚¤URL**: https://j1921604.github.io/ValueScope/
**GitHubãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/J1921604/ValueScope
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0

---

## ğŸ¯ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦

ã“ã®ä»•æ§˜æ›¸ã¯ã€**ä»–ã®AIãŒå®Œç’§ã«å†ç¾ã§ãã‚‹**ã“ã¨ã‚’ç›®çš„ã¨ã—ãŸå®Œå…¨ãªå®Ÿè£…ä»•æ§˜æ›¸ã§ã™ã€‚
ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã€è¨­å®šã€ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
4. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ )
5. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
6. [ç’°å¢ƒæ§‹ç¯‰æ‰‹é †](#ç’°å¢ƒæ§‹ç¯‰æ‰‹é †)
7. [æ©Ÿèƒ½å®Ÿè£…è©³ç´°](#æ©Ÿèƒ½å®Ÿè£…è©³ç´°)
8. [ãƒ†ã‚¹ãƒˆä»•æ§˜](#ãƒ†ã‚¹ãƒˆä»•æ§˜)
9. [ãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜](#ãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜)
10. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶)
11. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„

æ±äº¬é›»åŠ›HDãƒ»ä¸­éƒ¨é›»åŠ›ãƒ»JERAã®ä¼æ¥­ä¾¡å€¤æŒ‡æ¨™ï¼ˆEVã€EV/EBITDAã€PERã€PBRï¼‰ã¨KPIï¼ˆROEã€è‡ªå·±è³‡æœ¬æ¯”ç‡ã€DSCRï¼‰ã‚’å¯è¦–åŒ–ã—ã€**ä¿¡å·æ©Ÿæ–¹å¼ï¼ˆç·‘/é»„/èµ¤ï¼‰**ã§è²¡å‹™å¥å…¨æ€§ã‚’è©•ä¾¡ã™ã‚‹ä¼æ¥­ä¾¡å€¤åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

- âœ… **ä¼æ¥­ä¾¡å€¤æŒ‡æ¨™è¡¨ç¤º**: EVã€EV/EBITDAã€PERã€PBRã€æ™‚ä¾¡ç·é¡ã€ç´”æœ‰åˆ©å­è² å‚µ
- âœ… **KPIã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰**: ROEã€è‡ªå·±è³‡æœ¬æ¯”ç‡ã€DSCRã®ä¿¡å·æ©Ÿè©•ä¾¡ï¼ˆç·‘â‰¥é–¾å€¤Aã€é»„â‰¥é–¾å€¤Bã€èµ¤<é–¾å€¤Bï¼‰
- âœ… **UIãƒ‡ã‚¶ã‚¤ãƒ³**: ã‚¿ã‚¤ãƒˆãƒ«ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚°ãƒªãƒ¼ãƒ³â†’ãƒã‚¼ãƒ³ã‚¿ï¼‰ã€EV/KPIåˆ†æãƒœã‚¿ãƒ³ï¼ˆãƒã‚¼ãƒ³ã‚¿åŸºèª¿ï¼‰ã€è²¡å‹™è«¸è¡¨ãƒœã‚¿ãƒ³ï¼ˆã‚·ã‚¢ãƒ³åŸºèª¿ï¼‰
- âœ… **ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—**: ä¸»è¦æŒ‡æ¨™æ¯”è¼ƒãƒ†ãƒ¼ãƒ–ãƒ«ã«?ãƒãƒ¼ã‚¯ãƒ’ãƒ³ãƒˆè¿½åŠ 
- âœ… **ãƒ•ãƒƒã‚¿**: æœ€çµ‚æ›´æ–°æ—¥æ™‚ï¼ˆå¹´æœˆæ—¥æ™‚åˆ†ï¼‰ã€æ¬¡å›æ›´æ–°äºˆå®šï¼ˆæ¯æ—¥ 07:00ï¼‰è¡¨ç¤º
- âœ… **EDINET APIé€£æº**: 10å¹´åˆ†ã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿è‡ªå‹•å–å¾—ï¼ˆTEPCO 34ä»¶ã€CHUBU 36ä»¶ã€JERA 16ä»¶ï¼‰
- âœ… **æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿**: Q1/Q2/Q3/Q4/Annualåˆ‡ã‚Šæ›¿ãˆï¼ˆUIå®Ÿè£…å®Œäº†ã€è¤‡æ•°æœŸãƒ‡ãƒ¼ã‚¿çµ±åˆå¾…ã¡ï¼‰
- âœ… **æ¨ç§»ã‚°ãƒ©ãƒ•**: æ™‚ç³»åˆ—ãƒãƒ£ãƒ¼ãƒˆï¼ˆåŸºç›¤å®Œäº†ã€è¤‡æ•°æœŸãƒ‡ãƒ¼ã‚¿å¾…ã¡ï¼‰
- âœ… **ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ**: å¤šæ¬¡å…ƒKPIæ¯”è¼ƒï¼ˆåŸºç›¤å®Œäº†ã€2ç¤¾ãƒ‡ãƒ¼ã‚¿çµ±åˆå¾…ã¡ï¼‰
- âœ… **ãƒ‡ãƒ¼ã‚¿å“è³ªæ¤œè¨¼**: ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ã€ç•°å¸¸å€¤æ¤œå‡º
- âœ… **GitHub Pagesè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: main pushã§è‡ªå‹•ãƒ“ãƒ«ãƒ‰&ãƒ‡ãƒ—ãƒ­ã‚¤

### æ†²æ³•ï¼ˆé–‹ç™ºåŸå‰‡ï¼‰

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ (PR)**:

- PR-001: LCPï¼ˆLargest Contentful Paintï¼‰< 2.5ç§’
- PR-002: TTIï¼ˆTime to Interactiveï¼‰< 2.0ç§’
- PR-003: åˆæœŸãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º gzipå¾Œ < 200KB
- PR-004: ãƒãƒ£ãƒ¼ãƒˆå†æç”» < 200ms
- PR-005: Lighthouseã‚¹ã‚³ã‚¢ â‰¥ 90

**ãƒ‡ãƒ¼ã‚¿å“è³ªè¦ä»¶ (DQ)**:

- DQ-001: XBRL/CSVè§£æï¼ˆ2ç¤¾åˆ†ï¼‰< 60ç§’
- DQ-002: ä¼æ¥­ä¾¡å€¤è¨ˆç®—ï¼ˆå…¨æŒ‡æ¨™ï¼‰< 10ç§’
- DQ-003: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ < 5ç§’
- DQ-004: ã‚¹ã‚­ãƒ¼ãƒé•åæ™‚ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ä¸­æ­¢

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ (SR)**:

- SR-001: EDINET APIã‚­ãƒ¼ã¯ç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼ˆ.env â†’ GitHub Secretsï¼‰
- SR-002: å¤–éƒ¨å…¥åŠ›æ¤œè¨¼ï¼ˆXBRL/CSVãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- SR-003: ä¾å­˜é–¢ä¿‚è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆGitHub Dependabotï¼‰
- SR-004: CORSè¨­å®šä¸è¦ï¼ˆå®Œå…¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´å®Ÿè¡Œï¼‰

**ãƒ†ã‚¹ãƒˆè¦ä»¶ (TR)**:

- TR-001: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ â‰¥ 80%
- TR-002: E2Eä¸»è¦ãƒ•ãƒ­ãƒ¼ 100%
- TR-003: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ < 30ç§’

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆMermaid v11ï¼‰

```mermaid
graph TB
    subgraph "Data Source"
        EDINET[EDINET API v2<br/>é‡‘èåºXBRL]
    end
    
    subgraph "GitHub Actions CI/CD"
        FETCH[fetch_edinet.py<br/>--years 10]
        PARSE[parse_edinet_xbrl.py<br/>lxml + pandas]
        CALC[build_valuation.py<br/>ä¼æ¥­ä¾¡å€¤è¨ˆç®—]
        SCORE[compute_scores.py<br/>KPIã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°]
    end
    
    subgraph "Data Files"
        RAW[XBRL/*.zip]
        PARSED[data/edinet_parsed/<br/>*_financials.json]
        VAL[public/data/valuation.json]
        KPI[public/data/scorecards.json]
        THR[public/data/kpi_targets.json]
    end
    
    subgraph "Frontend"
        VITE[Vite Build<br/>React + TypeScript]
        DIST[dist/<br/>é™çš„ãƒ•ã‚¡ã‚¤ãƒ«]
    end
    
    subgraph "Hosting"
        PAGES[GitHub Pages<br/>CDNé…ä¿¡]
    end
    
    subgraph "User"
        BROWSER[ãƒ–ãƒ©ã‚¦ã‚¶<br/>https://j1921604.github.io/ValueScope/]
    end
    
    EDINET -->|HTTPS GET| FETCH
    FETCH --> RAW
    RAW --> PARSE
    PARSE --> PARSED
    PARSED --> CALC
    CALC --> VAL
    PARSED --> SCORE
    SCORE --> KPI
    THR --> SCORE
    
    VAL --> VITE
    KPI --> VITE
    THR --> VITE
    
    VITE --> DIST
    DIST -->|GitHub Actions<br/>deploy-pages| PAGES
    PAGES --> BROWSER
    
    style EDINET fill:#e3f2fd
    style PAGES fill:#c8e6c9
    style BROWSER fill:#fff9c4
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆMermaid v11ï¼‰

```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant GitHubPages
    participant React
    participant Hooks
    participant JSON
    
    User->>Browser: https://j1921604.github.io/ValueScope/ ã«ã‚¢ã‚¯ã‚»ã‚¹
    Browser->>GitHubPages: index.html ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    GitHubPages-->>Browser: index.html + assets/*
    Browser->>React: App.tsx ãƒã‚¦ãƒ³ãƒˆ
    React->>Hooks: useValuation() å®Ÿè¡Œ
    Hooks->>JSON: data/valuation.json fetch
    JSON-->>Hooks: ä¼æ¥­ä¾¡å€¤ãƒ‡ãƒ¼ã‚¿
    Hooks->>React: setValuationData()
    React->>Hooks: useScores() å®Ÿè¡Œ
    Hooks->>JSON: data/scorecards.json fetch
    JSON-->>Hooks: KPIã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿
    Hooks->>React: setScoresData()
    React->>Browser: UIæç”»ï¼ˆValuationTable + ScoreCardï¼‰
    Browser->>User: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```json
{
  "framework": "React 18.2.0",
  "language": "TypeScript 5.3.3",
  "buildTool": "Vite 5.0.8",
  "chartLibrary": "Recharts 2.10.3",
  "cssFramework": "Tailwind CSS 3.4.1"
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼‰

```json
{
  "runtime": "Python 3.11",
  "dataProcessing": "pandas 2.1.4",
  "xmlParsing": "lxml 5.2.1",
  "htmlParsing": "beautifulsoup4 4.12.3",
  "httpClient": "requests 2.31.0",
  "stockPriceAPI": "pandas_datareader 0.10.0 (Stooq)"
}
```

### ãƒ†ã‚¹ãƒˆ

```json
{
  "unitTest": "Vitest 1.1.0",
  "e2eTest": "Playwright 1.40.1",
  "testLibrary": "@testing-library/react 14.1.2"
}
```

### ãƒ‡ãƒ—ãƒ­ã‚¤

- **GitHub Pages**: é™çš„ã‚µã‚¤ãƒˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼ˆhttps://j1921604.github.io/ValueScope/ï¼‰
- **GitHub Actions**: CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆ.github/workflows/deploy-pages.ymlï¼‰

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
ValueScope/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy-pages.yml           # CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx                        # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ main.tsx                       # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ index.css                      # Tailwindè¨­å®š
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ValuationTable.tsx         # ä¼æ¥­ä¾¡å€¤æŒ‡æ¨™ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”‚   â”œâ”€â”€ ScoreCard.tsx              # KPIã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ TrendChart.tsx             # æ¨ç§»ã‚°ãƒ©ãƒ•
â”‚   â”‚   â”œâ”€â”€ RadarChart.tsx             # ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
â”‚   â”‚   â””â”€â”€ KPIGauge.tsx               # KPIã‚²ãƒ¼ã‚¸ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useValuation.ts            # ä¼æ¥­ä¾¡å€¤ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ useScores.ts               # KPIã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒƒã‚¯
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts                   # TypeScriptå‹å®šç¾©
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ formatNumber.ts            # æ•°å€¤ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚       â””â”€â”€ formatDate.ts              # æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ fetch_edinet.py                # EDINET APIãƒ‡ãƒ¼ã‚¿å–å¾—
â”‚   â”œâ”€â”€ parse_edinet_xbrl.py           # XBRLè§£æ
â”‚   â”œâ”€â”€ build_valuation.py             # ä¼æ¥­ä¾¡å€¤è¨ˆç®—
â”‚   â”œâ”€â”€ compute_scores.py              # KPIã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
â”‚   â”œâ”€â”€ validate_thresholds.py         # ãƒ‡ãƒ¼ã‚¿å“è³ªæ¤œè¨¼
â”‚   â””â”€â”€ requirements.txt               # Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ kpi_targets.json               # KPIé–¾å€¤å®šç¾©
â”‚   â”œâ”€â”€ scorecards.json                # KPIã‚¹ã‚³ã‚¢ï¼ˆç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ valuation.json                 # ä¼æ¥­ä¾¡å€¤ï¼ˆç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â””â”€â”€ edinet_parsed/
â”‚       â”œâ”€â”€ TEPCO_financials.json      # TEPCOè²¡å‹™ãƒ‡ãƒ¼ã‚¿
â”‚       â”œâ”€â”€ CHUBU_financials.json      # CHUBUè²¡å‹™ãƒ‡ãƒ¼ã‚¿
â”‚       â””â”€â”€ JERA_financials.json       # JERAè²¡å‹™ãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ public/
â”‚   â””â”€â”€ data/                          # ãƒ“ãƒ«ãƒ‰å…¥åŠ›ç”¨ï¼ˆGitãƒˆãƒ©ãƒƒã‚¯æ¸ˆã¿ï¼‰
â”‚       â”œâ”€â”€ kpi_targets.json
â”‚       â”œâ”€â”€ scorecards.json
â”‚       â””â”€â”€ valuation.json
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ e2e/
â”‚       â”œâ”€â”€ scorecard-display.spec.ts  # E2Eãƒ†ã‚¹ãƒˆ
â”‚       â””â”€â”€ valuation-display.spec.ts
â”œâ”€â”€ XBRL/                              # EDINET XBRLãƒ•ã‚¡ã‚¤ãƒ«æ ¼ç´
â”‚   â”œâ”€â”€ E04498/                        # TEPCOï¼ˆ34ä»¶ï¼‰
â”‚   â”œâ”€â”€ E04502/                        # CHUBUï¼ˆ36ä»¶ï¼‰
â”‚   â””â”€â”€ E34837/                        # JERAï¼ˆ16ä»¶ï¼‰
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ DEPLOY_GUIDE.md                # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †æ›¸
â”‚   â””â”€â”€ å®Œå…¨ä»•æ§˜æ›¸.md                  # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ specs/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ spec.md                    # æ©Ÿèƒ½ä»•æ§˜æ›¸
â”‚       â”œâ”€â”€ plan.md                    # å®Ÿè£…è¨ˆç”»æ›¸
â”‚       â”œâ”€â”€ tasks.md                   # ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
â”‚       â”œâ”€â”€ quickstart.md              # ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰
â”‚       â””â”€â”€ checklists/
â”‚           â””â”€â”€ requirements.md        # è¦ä»¶ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
â”œâ”€â”€ package.json                       # NPMè¨­å®š
â”œâ”€â”€ tsconfig.json                      # TypeScriptè¨­å®š
â”œâ”€â”€ vite.config.ts                     # Viteè¨­å®š
â”œâ”€â”€ vitest.config.ts                   # Vitestè¨­å®š
â”œâ”€â”€ playwright.config.ts               # Playwrightè¨­å®š
â”œâ”€â”€ index.html                         # HTMLã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ start.ps1                          # ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ README.md                          # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆREADME
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ä¼æ¥­ä¾¡å€¤ãƒ‡ãƒ¼ã‚¿ï¼ˆvaluation.jsonï¼‰

```typescript
interface ValuationData {
  asOf: string;                    // ãƒ‡ãƒ¼ã‚¿åŸºæº–æ—¥ï¼ˆISO 8601å½¢å¼ï¼‰
  companies: {
    [key: string]: {
      marketCap: number;           // æ™‚ä¾¡ç·é¡ï¼ˆç™¾ä¸‡å††ï¼‰
      totalDebt: number;           // æœ‰åˆ©å­è² å‚µåˆè¨ˆï¼ˆç™¾ä¸‡å††ï¼‰
      cash: number;                // ç¾é‡‘åŠã³ç¾é‡‘åŒç­‰ç‰©ï¼ˆç™¾ä¸‡å††ï¼‰
      enterpriseValue: number;     // ä¼æ¥­ä¾¡å€¤ EVï¼ˆç™¾ä¸‡å††ï¼‰
      ebitda: number;              // EBITDAï¼ˆç™¾ä¸‡å††ï¼‰
      evEbitda: number;            // EV/EBITDAå€ç‡
      eps: number;                 // EPSï¼ˆå††ï¼‰
      per: number;                 // PERï¼ˆå€ï¼‰
      bps: number;                 // BPSï¼ˆå††ï¼‰
      pbr: number;                 // PBRï¼ˆå€ï¼‰
      dividendYield: number;       // é…å½“åˆ©å›ã‚Šï¼ˆ%ï¼‰
    };
  };
}
```

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«**:

- `asOf`: ISO 8601å½¢å¼ã®æœ‰åŠ¹ãªæ—¥ä»˜æ–‡å­—åˆ—
- æ•°å€¤ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: æ­£ã®æ•°å€¤ã€nullç¦æ­¢
- `companies`: TEPCOã€CHUBUã€JERAã‚’å«ã‚€

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿**:

```json
{
  "asOf": "2025-09-30",
  "companies": {
    "TEPCO": {
      "marketCap": 2000000,
      "totalDebt": 5000000,
      "cash": 500000,
      "enterpriseValue": 4322458,
      "ebitda": 279000,
      "evEbitda": 15.50,
      "eps": 120.5,
      "per": 9.27,
      "bps": 1500.0,
      "pbr": 0.71,
      "dividendYield": 2.5
    }
  }
}
```

### KPIã‚¹ã‚³ã‚¢ãƒ‡ãƒ¼ã‚¿ï¼ˆscorecards.jsonï¼‰

```typescript
interface Score {
  value: number;                   // å®Ÿç¸¾å€¤
  score: 'green' | 'yellow' | 'red'; // ä¿¡å·æ©Ÿè©•ä¾¡
  change: number;                  // å‰æœŸæ¯”å¤‰å‹•ï¼ˆ%ï¼‰
}

interface Scorecard {
  asOf: string;                    // ãƒ‡ãƒ¼ã‚¿åŸºæº–æ—¥
  companies: {
    [company: string]: {
      [period: string]: {          // Q1, Q2, Q3, Q4, Annual
        date: string;              // æœŸæœ«æ—¥
        roe: Score;                // è‡ªå·±è³‡æœ¬åˆ©ç›Šç‡ï¼ˆ%ï¼‰
        equityRatio: Score;        // è‡ªå·±è³‡æœ¬æ¯”ç‡ï¼ˆ%ï¼‰
        DSCR: Score;               // å‚µå‹™è¿”æ¸ˆèƒ½åŠ›ï¼ˆå€ï¼‰
      };
      latest: {                    // æœ€æ–°æœŸãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
        roe: Score;
        equityRatio: Score;
        DSCR: Score;
      };
    };
  };
}
```

**ä¿¡å·æ©Ÿè©•ä¾¡ãƒ«ãƒ¼ãƒ«**:

| KPI | ç·‘ï¼ˆgreenï¼‰ | é»„ï¼ˆyellowï¼‰ | èµ¤ï¼ˆredï¼‰ |
|-----|------------|--------------|-----------|
| ROE | â‰¥10% | 5%-10% | <5% |
| è‡ªå·±è³‡æœ¬æ¯”ç‡ | â‰¥30% | 20%-30% | <20% |
| DSCR | â‰¥1.5å€ | 1.0-1.5å€ | <1.0å€ |

---

## ä¸»è¦æŒ‡æ¨™è¨ˆç®—å¼ï¼ˆå®Œå…¨ç‰ˆï¼‰

### 1. ä¼æ¥­ä¾¡å€¤ï¼ˆEVï¼‰é–¢é€£æŒ‡æ¨™

#### 1.1 æ™‚ä¾¡ç·é¡ï¼ˆMarket Capitalizationï¼‰
```
æ™‚ä¾¡ç·é¡ = æ ªä¾¡ Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•°
```
- **æ ªä¾¡**: æ±ºç®—æ—¥æ™‚ç‚¹ã®çµ‚å€¤ï¼ˆStooq / pandas_datareaderã‚ˆã‚Šå–å¾—ï¼‰
- **ç™ºè¡Œæ¸ˆæ ªå¼æ•°**: XBRL `issuedShares` ã‹ã‚‰å–å¾—
- **å˜ä½**: ç™¾ä¸‡å††ï¼ˆæ ªä¾¡[å††] Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•° / 1,000,000ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼ˆæ¨å®šå€¤ãªã—ï¼‰

#### 1.2 ç´”æœ‰åˆ©å­è² å‚µï¼ˆNet Debtï¼‰
```
ç´”æœ‰åˆ©å­è² å‚µ = æœ‰åˆ©å­è² å‚µ - ç¾é‡‘åŠã³é é‡‘
```
- **æœ‰åˆ©å­è² å‚µ**: XBRL `interestBearingDebt` ã‹ã‚‰å–å¾—
- **ç¾é‡‘åŠã³é é‡‘**: XBRL `cashAndDeposits` ã‹ã‚‰å–å¾—
- **å˜ä½**: ç™¾ä¸‡å††
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿

#### 1.3 ä¼æ¥­ä¾¡å€¤ï¼ˆEnterprise Valueï¼‰
```
ä¼æ¥­ä¾¡å€¤ï¼ˆEVï¼‰ = æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ
```
- **è¨ˆç®—æ¡ä»¶**: æ™‚ä¾¡ç·é¡ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿è¨ˆç®—ï¼ˆéä¸Šå ´ä¼æ¥­ã¯nullï¼‰
- **å˜ä½**: ç™¾ä¸‡å††
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿

#### 1.4 EV/EBITDAå€ç‡
```
EV/EBITDAå€ç‡ = ä¼æ¥­ä¾¡å€¤ / EBITDA
```
- **EBITDA**: XBRL `ebitda` ã‹ã‚‰å–å¾—ï¼ˆå–¶æ¥­åˆ©ç›Š + æ¸›ä¾¡å„Ÿå´è²»ï¼‰
- **è¨ˆç®—æ¡ä»¶**: EBITDA > 0 ã®å ´åˆã®ã¿è¨ˆç®—
- **å˜ä½**: å€
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿

#### 1.5 PERï¼ˆæ ªä¾¡åç›Šç‡ï¼‰
```
PER = æ™‚ä¾¡ç·é¡ / å½“æœŸç´”åˆ©ç›Š
```
- **å½“æœŸç´”åˆ©ç›Š**: XBRL `netIncome` ã‹ã‚‰å–å¾—
- **è¨ˆç®—æ¡ä»¶**: å½“æœŸç´”åˆ©ç›Š > 0 ã®å ´åˆã®ã¿è¨ˆç®—
- **å˜ä½**: å€
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿

#### 1.6 PBRï¼ˆæ ªä¾¡ç´”è³‡ç”£å€ç‡ï¼‰
```
PBR = æ™‚ä¾¡ç·é¡ / è‡ªå·±è³‡æœ¬
```
- **è‡ªå·±è³‡æœ¬**: XBRL `equity` ã‹ã‚‰å–å¾—
- **è¨ˆç®—æ¡ä»¶**: è‡ªå·±è³‡æœ¬ > 0 ã®å ´åˆã®ã¿è¨ˆç®—
- **å˜ä½**: å€
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿

---

### 2. KPIæŒ‡æ¨™

#### 2.1 ROEï¼ˆè‡ªå·±è³‡æœ¬åˆ©ç›Šç‡ï¼‰
```
ROE = (å½“æœŸç´”åˆ©ç›Š / è‡ªå·±è³‡æœ¬) Ã— 100
```
- **å½“æœŸç´”åˆ©ç›Š**: XBRL `netIncome` ã‹ã‚‰å–å¾—
- **è‡ªå·±è³‡æœ¬**: XBRL `equity` ã‹ã‚‰å–å¾—
- **è¨ˆç®—æ¡ä»¶**: è‡ªå·±è³‡æœ¬ > 0 ã®å ´åˆã®ã¿è¨ˆç®—
- **å˜ä½**: %ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆï¼‰
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼ˆæ¨å®šå€¤ãªã—ï¼‰

#### 2.2 è‡ªå·±è³‡æœ¬æ¯”ç‡ï¼ˆEquity Ratioï¼‰
```
è‡ªå·±è³‡æœ¬æ¯”ç‡ = (è‡ªå·±è³‡æœ¬ / ç·è³‡ç”£) Ã— 100
```
- **è‡ªå·±è³‡æœ¬**: XBRL `equity` ã‹ã‚‰å–å¾—
- **ç·è³‡ç”£**: XBRL `totalAssets` ã‹ã‚‰å–å¾—
- **è¨ˆç®—æ¡ä»¶**: ç·è³‡ç”£ > 0 ã®å ´åˆã®ã¿è¨ˆç®—
- **å˜ä½**: %ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆï¼‰
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿

#### 2.3 DSCRï¼ˆDebt Service Coverage Ratioï¼‰
```
DSCR = å–¶æ¥­CF / (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯)
```
- **å–¶æ¥­CF**: CF `operatingCashFlow` ã‹ã‚‰å–å¾—
- **1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ**: BS `currentPortionOfNoncurrentLiabilities` ã‹ã‚‰å–å¾—
- **æ”¯æ‰•åˆ©æ¯**: PL `interestExpenses` ã‹ã‚‰å–å¾—
- **è¨ˆç®—æ¡ä»¶**: (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯) > 0 ã®å ´åˆã®ã¿è¨ˆç®—
- **å˜ä½**: å€
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼ˆæ¨å®šå€¤ãªã—ï¼‰

---

### 3. ãƒ‡ãƒ¼ã‚¿å–å¾—å…ƒã¨è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

#### 3.1 è²¡å‹™ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
```
EDINET API â†’ XBRL ZIP â†’ parse_edinet_xbrl.py â†’ *_financials.json
```

#### 3.2 æ ªä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
```
Stooq API (pandas_datareader) â†’ prices/*.csv â†’ build_timeseries.py â†’ timeseries.json
```

#### 3.3 è¨ˆç®—å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
- **`scripts/build_timeseries.py`**: æ™‚ç³»åˆ—KPIè¨ˆç®—
- **`scripts/build_valuation.py`**: ä¼æ¥­ä¾¡å€¤è¨ˆç®—
- **`scripts/compute_scores.py`**: ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆä¿¡å·æ©Ÿè©•ä¾¡ï¼‰

#### 3.4 æ¨å®šå€¤ãƒ»ä»®å®šå€¤ã®æ’é™¤ãƒ«ãƒ¼ãƒ«

**åŸå‰‡**: ã™ã¹ã¦ã®è¨ˆç®—ã¯ **XBRLå®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿** ã‚’ä½¿ç”¨ã—ã€æ¨å®šå€¤ã‚„è£œå®Œå€¤ã¯ **ä¸€åˆ‡ä½¿ç”¨ã—ãªã„**

**å…·ä½“çš„ãªå¯¾å¿œ**:
- ãƒ‡ãƒ¼ã‚¿æ¬ ææ™‚ã¯ `null` ã¾ãŸã¯ `0` ã‚’è¿”ã™ï¼ˆè£œå®Œã—ãªã„ï¼‰
- å–¶æ¥­CFãŒã‚¼ãƒ­ã®å ´åˆã€æ¨å®šã›ãšãã®ã¾ã¾ `0` ã‚’è¨˜éŒ²
- ç™ºè¡Œæ¸ˆæ ªå¼æ•°ãŒå–å¾—ã§ããªã„å ´åˆã€æ™‚ä¾¡ç·é¡ãŠã‚ˆã³ãã‚Œã«ä¾å­˜ã™ã‚‹æŒ‡æ¨™ï¼ˆEVã€PERã€PBRã€EV/EBITDAï¼‰ã¯ `null`
- åˆ†æ¯ãŒã‚¼ãƒ­ã®å ´åˆã€è¨ˆç®—ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ `null` ã¾ãŸã¯ `0` ã‚’è¿”ã™

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ä¸€è¦§**:

| æŒ‡æ¨™ | è¨ˆç®—å¼ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆXBRLé …ç›®ï¼‰ | æ¨å®šå€¤ã®æœ‰ç„¡ |
|------|--------|-------------------------|--------------|
| ROE | å½“æœŸç´”åˆ©ç›Š / è‡ªå·±è³‡æœ¬ Ã— 100 | PL.csv `ProfitLossAttributableToOwnersOfParent` Ã· BS.csv `Equity` | âŒ ãªã— |
| è‡ªå·±è³‡æœ¬æ¯”ç‡ | è‡ªå·±è³‡æœ¬ / ç·è³‡ç”£ Ã— 100 | BS.csv `Equity` Ã· BS.csv `TotalAssets` | âŒ ãªã— |
| DSCR | å–¶æ¥­CF / (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯) | CF.csv `NetCashProvidedByUsedInOperatingActivities` Ã· (BS.csv `CurrentPortionOfNoncurrentLiabilities` + PL.csv `InterestExpensesNOE`) | âŒ ãªã— |
| æ™‚ä¾¡ç·é¡ | æ±ºç®—æ—¥æ ªä¾¡ Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•° | `data/prices/{è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰}.csv` Ã— BS.csv `TotalNumberOfIssuedSharesSummaryOfBusinessResults` | âŒ ãªã—ï¼ˆæ ªä¾¡ã¯å®Ÿãƒ‡ãƒ¼ã‚¿ã€æ ªå¼æ•°ã¯XBRLå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰ |
| ç´”æœ‰åˆ©å­è² å‚µ | æœ‰åˆ©å­è² å‚µ - ç¾é‡‘åŠã³é é‡‘ | (BS.csv `BondsPayable` + `LongTermLoansPayable` + `ShortTermLoansPayable`) - BS.csv `CashAndDeposits` | âŒ ãªã— |
| ä¼æ¥­ä¾¡å€¤ï¼ˆEVï¼‰ | æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ | æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ | âŒ ãªã— |
| EV/EBITDA | ä¼æ¥­ä¾¡å€¤ / EBITDA | EV Ã· EBITDA | âŒ ãªã— |
| PER | æ™‚ä¾¡ç·é¡ / å½“æœŸç´”åˆ©ç›Š | æ™‚ä¾¡ç·é¡ Ã· PL.csv `ProfitLoss` | âŒ ãªã— |
| PBR | æ™‚ä¾¡ç·é¡ / è‡ªå·±è³‡æœ¬ | æ™‚ä¾¡ç·é¡ Ã· BS.csv `Equity` | âŒ ãªã— |
| å–¶æ¥­CF | å–¶æ¥­æ´»å‹•ã«ã‚ˆã‚‹CF | CF.csv `NetCashProvidedByUsedInOperatingActivities` | âŒ ãªã— |

---

**è¨ˆç®—å¼**:
- **ROE** = å½“æœŸç´”åˆ©ç›Š / è‡ªå·±è³‡æœ¬ Ã— 100
- **è‡ªå·±è³‡æœ¬æ¯”ç‡** = è‡ªå·±è³‡æœ¬ / ç·è³‡ç”£ Ã— 100
- **DSCR** = å–¶æ¥­CF / (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯)
- **æ™‚ä¾¡ç·é¡** = æ±ºç®—æ—¥æ ªä¾¡ Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•°ï¼ˆéä¸Šå ´ä¼æ¥­ã¯nullï¼‰
- **ç´”æœ‰åˆ©å­è² å‚µ** = æœ‰åˆ©å­è² å‚µ - ç¾é‡‘åŠã³é é‡‘
- **ä¼æ¥­ä¾¡å€¤ï¼ˆEVï¼‰** = æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ
- **EV/EBITDA** = ä¼æ¥­ä¾¡å€¤ / EBITDAï¼ˆEBITDA > 0 ã‹ã¤ EV â‰  nullï¼‰
- **PER** = æ™‚ä¾¡ç·é¡ / å½“æœŸç´”åˆ©ç›Šï¼ˆå½“æœŸç´”åˆ©ç›Š > 0 ã‹ã¤ æ™‚ä¾¡ç·é¡ â‰  nullï¼‰
- **PBR** = æ™‚ä¾¡ç·é¡ / è‡ªå·±è³‡æœ¬ï¼ˆè‡ªå·±è³‡æœ¬ > 0 ã‹ã¤ æ™‚ä¾¡ç·é¡ â‰  nullï¼‰

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿**:

```json
{
  "asOf": "2025-11-30",
  "companies": {
    "TEPCO": {
      "Q2": {
        "date": "2025-09-30",
        "roe": { "value": 5.02, "score": "yellow", "change": 0 },
        "equityRatio": { "value": 20.5, "score": "yellow", "change": 0 },
        "DSCR": { "value": 1.2, "score": "yellow", "change": 0 }
      },
      "Annual": {
        "date": "2025-03-31",
        "roe": { "value": 7.62, "score": "yellow", "change": 0 },
        "equityRatio": { "value": 23.4, "score": "yellow", "change": 0 },
        "DSCR": { "value": 1.5, "score": "green", "change": 0 }
      },
      "latest": {
        "roe": { "value": 5.02, "score": "yellow", "change": 0 },
        "equityRatio": { "value": 20.5, "score": "yellow", "change": 0 },
        "DSCR": { "value": 1.2, "score": "yellow", "change": 0 }
      }
    }
  }
}
```

### KPIé–¾å€¤å®šç¾©ï¼ˆkpi_targets.jsonï¼‰

```typescript
interface KPITargets {
  ROE: {
    green: number;    // â‰¥10%
    yellow: number;   // â‰¥5%
  };
  equityRatio: {
    green: number;    // â‰¥30%
    yellow: number;   // â‰¥20%
  };
  DSCR: {
    green: number;    // â‰¥1.5
    yellow: number;   // â‰¥1.0
  };
}
```

---

### 3. ãƒ‡ãƒ¼ã‚¿å–å¾—å…ƒã¨è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

#### 3.1 è²¡å‹™ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
```
EDINET API â†’ XBRL ZIP â†’ parse_edinet_xbrl.py â†’ *_financials.json
```

#### 3.2 æ ªä¾¡ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
```
Stooq API (pandas_datareader) â†’ prices/*.csv â†’ build_timeseries.py â†’ timeseries.json
```

#### 3.3 è¨ˆç®—å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
- **`scripts/build_timeseries.py`**: æ™‚ç³»åˆ—KPIè¨ˆç®—
- **`scripts/build_valuation.py`**: ä¼æ¥­ä¾¡å€¤è¨ˆç®—
- **`scripts/compute_scores.py`**: ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆä¿¡å·æ©Ÿè©•ä¾¡ï¼‰

#### 3.4 æ¨å®šå€¤ãƒ»ä»®å®šå€¤ã®æ’é™¤ãƒ«ãƒ¼ãƒ«

**åŸå‰‡**: ã™ã¹ã¦ã®è¨ˆç®—ã¯ **XBRLå®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿** ã‚’ä½¿ç”¨ã—ã€æ¨å®šå€¤ã‚„è£œå®Œå€¤ã¯ **ä¸€åˆ‡ä½¿ç”¨ã—ãªã„**

**å…·ä½“çš„ãªå¯¾å¿œ**:
- ãƒ‡ãƒ¼ã‚¿æ¬ ææ™‚ã¯ `null` ã¾ãŸã¯ `0` ã‚’è¿”ã™ï¼ˆè£œå®Œã—ãªã„ï¼‰
- å–¶æ¥­CFãŒã‚¼ãƒ­ã®å ´åˆã€æ¨å®šã›ãšãã®ã¾ã¾ `0` ã‚’è¨˜éŒ²
- ç™ºè¡Œæ¸ˆæ ªå¼æ•°ãŒå–å¾—ã§ããªã„å ´åˆã€æ™‚ä¾¡ç·é¡ãŠã‚ˆã³ãã‚Œã«ä¾å­˜ã™ã‚‹æŒ‡æ¨™ï¼ˆEVã€PERã€PBRã€EV/EBITDAï¼‰ã¯ `null`
- åˆ†æ¯ãŒã‚¼ãƒ­ã®å ´åˆã€è¨ˆç®—ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ `null` ã¾ãŸã¯ `0` ã‚’è¿”ã™

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ä¸€è¦§**:

| æŒ‡æ¨™ | è¨ˆç®—å¼ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆXBRLé …ç›®ï¼‰ | æ¨å®šå€¤ã®æœ‰ç„¡ |
|------|--------|-------------------------|--------------|
| ROE | å½“æœŸç´”åˆ©ç›Š / è‡ªå·±è³‡æœ¬ Ã— 100 | PL.csv `ProfitLossAttributableToOwnersOfParent` Ã· BS.csv `Equity` | âŒ ãªã— |
| è‡ªå·±è³‡æœ¬æ¯”ç‡ | è‡ªå·±è³‡æœ¬ / ç·è³‡ç”£ Ã— 100 | BS.csv `Equity` Ã· BS.csv `TotalAssets` | âŒ ãªã— |
| DSCR | å–¶æ¥­CF / (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯) | CF.csv `NetCashProvidedByUsedInOperatingActivities` Ã· (BS.csv `CurrentPortionOfNoncurrentLiabilities` + PL.csv `InterestExpensesNOE`) | âŒ ãªã— |
| æ™‚ä¾¡ç·é¡ | æ±ºç®—æ—¥æ ªä¾¡ Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•° | `data/prices/{è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰}.csv` Ã— BS.csv `TotalNumberOfIssuedSharesSummaryOfBusinessResults` | âŒ ãªã—ï¼ˆæ ªä¾¡ã¯å®Ÿãƒ‡ãƒ¼ã‚¿ã€æ ªå¼æ•°ã¯XBRLå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰ |
| ç´”æœ‰åˆ©å­è² å‚µ | æœ‰åˆ©å­è² å‚µ - ç¾é‡‘åŠã³é é‡‘ | (BS.csv `BondsPayable` + `LongTermLoansPayable` + `ShortTermLoansPayable`) - BS.csv `CashAndDeposits` | âŒ ãªã— |
| ä¼æ¥­ä¾¡å€¤ï¼ˆEVï¼‰ | æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ | æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ | âŒ ãªã— |
| EV/EBITDA | ä¼æ¥­ä¾¡å€¤ / EBITDA | EV Ã· EBITDA | âŒ ãªã— |
| PER | æ™‚ä¾¡ç·é¡ / å½“æœŸç´”åˆ©ç›Š | æ™‚ä¾¡ç·é¡ Ã· PL.csv `ProfitLoss` | âŒ ãªã— |
| PBR | æ™‚ä¾¡ç·é¡ / è‡ªå·±è³‡æœ¬ | æ™‚ä¾¡ç·é¡ Ã· BS.csv `Equity` | âŒ ãªã— |
| å–¶æ¥­CF | å–¶æ¥­æ´»å‹•ã«ã‚ˆã‚‹CF | CF.csv `NetCashProvidedByUsedInOperatingActivities` | âŒ ãªã— |

---

**è¨ˆç®—å¼**:
- **ROE** = å½“æœŸç´”åˆ©ç›Š / è‡ªå·±è³‡æœ¬ Ã— 100
- **è‡ªå·±è³‡æœ¬æ¯”ç‡** = è‡ªå·±è³‡æœ¬ / ç·è³‡ç”£ Ã— 100
- **DSCR** = å–¶æ¥­CF / (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯)
- **æ™‚ä¾¡ç·é¡** = æ±ºç®—æ—¥æ ªä¾¡ Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•°ï¼ˆéä¸Šå ´ä¼æ¥­ã¯nullï¼‰
- **ç´”æœ‰åˆ©å­è² å‚µ** = æœ‰åˆ©å­è² å‚µ - ç¾é‡‘åŠã³é é‡‘
- **ä¼æ¥­ä¾¡å€¤ï¼ˆEVï¼‰** = æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ
- **EV/EBITDA** = ä¼æ¥­ä¾¡å€¤ / EBITDAï¼ˆEBITDA > 0 ã‹ã¤ EV â‰  nullï¼‰
- **PER** = æ™‚ä¾¡ç·é¡ / å½“æœŸç´”åˆ©ç›Šï¼ˆå½“æœŸç´”åˆ©ç›Š > 0 ã‹ã¤ æ™‚ä¾¡ç·é¡ â‰  nullï¼‰
- **PBR** = æ™‚ä¾¡ç·é¡ / è‡ªå·±è³‡æœ¬ï¼ˆè‡ªå·±è³‡æœ¬ > 0 ã‹ã¤ æ™‚ä¾¡ç·é¡ â‰  nullï¼‰

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿**:

```json
{
  "asOf": "2025-11-30",
  "companies": {
    "TEPCO": {
      "Q2": {
        "date": "2025-09-30",
        "roe": { "value": 5.02, "score": "yellow", "change": 0 },
        "equityRatio": { "value": 20.5, "score": "yellow", "change": 0 },
        "DSCR": { "value": 1.2, "score": "yellow", "change": 0 }
      },
      "Annual": {
        "date": "2025-03-31",
        "roe": { "value": 7.62, "score": "yellow", "change": 0 },
        "equityRatio": { "value": 23.4, "score": "yellow", "change": 0 },
        "DSCR": { "value": 1.5, "score": "green", "change": 0 }
      },
      "latest": {
        "roe": { "value": 5.02, "score": "yellow", "change": 0 },
        "equityRatio": { "value": 20.5, "score": "yellow", "change": 0 },
        "DSCR": { "value": 1.2, "score": "yellow", "change": 0 }
      }
    }
  }
}
```

### KPIé–¾å€¤å®šç¾©ï¼ˆkpi_targets.jsonï¼‰

```typescript
interface KPITargets {
  ROE: {
    green: number;    // â‰¥10%
    yellow: number;   // â‰¥5%
  };
  equityRatio: {
    green: number;    // â‰¥30%
    yellow: number;   // â‰¥20%
  };
  DSCR: {
    green: number;    // â‰¥1.5
    yellow: number;   // â‰¥1.0
  };
}
```
- `active`: æœªå®Œäº†ã‚¿ã‚¹ã‚¯ã®ã¿è¡¨ç¤º
- `completed`: å®Œäº†ã‚¿ã‚¹ã‚¯ã®ã¿è¡¨ç¤º

### StorageKey

```typescript
type StorageKey = `${string}-todos`
```

**å½¢å¼**: `{ãƒšãƒ¼ã‚¸å}-todos`
**ä¾‹**: `TestUser-todos`, `ç”°ä¸­-todos`, `æµœå´-ç§€å¯¿-todos`

**ç”Ÿæˆãƒ«ãƒ¼ãƒ«**:

- ã‚¹ãƒšãƒ¼ã‚¹ã¯ãƒã‚¤ãƒ•ãƒ³ã«å¤‰æ›
- æ—¥æœ¬èªã¯ãã®ã¾ã¾ä¿æŒ
- å°æ–‡å­—ã«çµ±ä¸€

### UserPage

```typescript
interface UserPage {
  /** ãƒšãƒ¼ã‚¸åï¼ˆ1ã€œ50æ–‡å­—ï¼‰ */
  name: string
  
  /** ã‚¢ã‚¤ã‚³ãƒ³çµµæ–‡å­—ï¼ˆ1æ–‡å­—ï¼‰ */
  icon: string
  
  /** ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ‘ã‚¹ï¼ˆä¾‹: "/testuser-todo"ï¼‰ */
  path: string
}
```

**ãƒ‘ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:

- URLå½¢å¼: `/{name}-todo`
- å°æ–‡å­—ã€ãƒã‚¤ãƒ•ãƒ³åŒºåˆ‡ã‚Š
- ä¾‹: `/testuser-todo`, `/tanaka-todo`

---

## ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### å‰ææ¡ä»¶

- Node.js 20.xä»¥ä¸Š
- npm 10.xä»¥ä¸Š
- Python 3.11ä»¥ä¸Š
- Git
- PowerShell (Windows) ã¾ãŸã¯ bash (Mac/Linux)

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³

```powershell
git clone https://github.com/J1921604/ValueScope.git
cd ValueScope
```

### 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**Node.jsä¾å­˜é–¢ä¿‚**:

```powershell
npm install
```

**Pythonä¾å­˜é–¢ä¿‚**:

```powershell
pip install -r scripts/requirements.txt
```

### 3. ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆåˆå›ã®ã¿ï¼‰

EDINETã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€JSONã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```powershell
# 1. EDINET APIã‹ã‚‰XBRLãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆéå»10å¹´åˆ†ï¼‰
py scripts/fetch_edinet.py --years 10

# 2. XBRLè§£æãƒ»JSON/CSVå¤‰æ›
py scripts/parse_edinet_xbrl.py

# 3. ä¼æ¥­ä¾¡å€¤æŒ‡æ¨™è¨ˆç®—
py scripts/build_valuation.py

# 4. KPIã‚¹ã‚³ã‚¢è¨ˆç®—
py scripts/compute_scores.py
```

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

**æ–¹æ³•A: ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰èµ·å‹•ï¼ˆWindowsï¼‰**

```powershell
.\start.ps1
```

è‡ªå‹•çš„ã«ä»¥ä¸‹ãŒå®Ÿè¡Œã•ã‚Œã¾ã™:

1. ä¾å­˜é–¢ä¿‚ç¢ºèªãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ5173ï¼‰
3. ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•èµ·å‹• (http://localhost:5173/ValueScope/)

**æ–¹æ³•B: æ‰‹å‹•èµ·å‹•**

```powershell
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173/ValueScope/ ã‚’é–‹ã

### 5. å‹ãƒã‚§ãƒƒã‚¯

```powershell
npx tsc --noEmit
```

**æœŸå¾…çµæœ**: `0ã‚¨ãƒ©ãƒ¼`

### 6. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```powershell
npm run test
```

### 7. ãƒ“ãƒ«ãƒ‰

```powershell
npm run build
```

**å‡ºåŠ›å…ˆ**: `dist/`

### 8. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

```powershell
npm run preview
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:4173/ValueScope/ ã‚’é–‹ã

---

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**React Router v6ä½¿ç”¨**

```typescript
// basenameè¨­å®šï¼ˆGitHub Pageså¯¾å¿œï¼‰
const basename = import.meta.env.MODE === 'production' ? '/ValueScope/' : '/'

// ãƒ«ãƒ¼ãƒˆå®šç¾©
<Routes>
  <Route path="/" element={<App />} />
</Routes>
```

### ãƒšãƒ¼ã‚¸æ§‹æˆ

#### 1. Dashboard (`/`)

**ç›®çš„**: ä¼æ¥­ä¾¡å€¤åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

**æ©Ÿèƒ½**:

- ä¼æ¥­ä¾¡å€¤æŒ‡æ¨™ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆValuationTableï¼‰
- KPIã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰ï¼ˆScoreCardï¼‰
- æ¨ç§»ã‚°ãƒ©ãƒ•ï¼ˆTrendChartï¼‰
- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼ˆRadarChartï¼‰
- æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿åˆ‡ã‚Šæ›¿ãˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

1. **åˆæœŸãƒ­ãƒ¼ãƒ‰**: `useValuation` ã¨ `useScores` ãƒ•ãƒƒã‚¯ãŒ `public/data/*.json` ã‚’ãƒ•ã‚§ãƒƒãƒ
2. **ãƒ‡ãƒ¼ã‚¿çµåˆ**: å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã—ã€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã™
3. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**: æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿å¤‰æ›´æ™‚ã«è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

---

## æ©Ÿèƒ½å®Ÿè£…è©³ç´°

### 1. ä¼æ¥­ä¾¡å€¤æŒ‡æ¨™è¨ˆç®—

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `scripts/build_timeseries.py`

**è¨ˆç®—å¼ï¼ˆæ¨å®šå€¤ãƒ»ä»®å®šå€¤ãªã—ï¼‰**:

#### ROE (Return on Equity)
```
ROE (%) = (è¦ªä¼šç¤¾æ ªä¸»å¸°å±å½“æœŸç´”åˆ©ç›Š / è‡ªå·±è³‡æœ¬) Ã— 100
```
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: PL.csv `ProfitLossAttributableToOwnersOfParent` Ã· BS.csv `Equity`
- **å˜ä½**: ç™¾ä¸‡å††

#### è‡ªå·±è³‡æœ¬æ¯”ç‡ (Equity Ratio)
```
è‡ªå·±è³‡æœ¬æ¯”ç‡ (%) = (è‡ªå·±è³‡æœ¬ / ç·è³‡ç”£) Ã— 100
```
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: BS.csv `Equity` Ã· BS.csv `TotalAssets`
- **å˜ä½**: ç™¾ä¸‡å††

#### DSCR (Debt Service Coverage Ratio)
```
DSCR (å€) = EBITDA / æœ‰åˆ©å­è² å‚µ
```
- **EBITDAã®è¨ˆç®—**:
  - å½“æœŸç´”åˆ©ç›Š + æ”¯æ‰•åˆ©æ¯ + æ¸›ä¾¡å„Ÿå´è²»ï¼ˆç°¡æ˜“ç‰ˆï¼‰
  - **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: PL.csv `ProfitLoss` + PL.csv `InterestExpensesNOE` + CF.csv `DepreciationAndAmortizationOpeCF`
- **æœ‰åˆ©å­è² å‚µã®è¨ˆç®—**:
  - ç¤¾å‚µ + é•·æœŸå€Ÿå…¥é‡‘ + çŸ­æœŸå€Ÿå…¥é‡‘
  - **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: BS.csv `BondsPayable` + BS.csv `LongTermLoansPayable` + BS.csv `ShortTermLoansPayable`
- **å˜ä½**: ç™¾ä¸‡å††

#### æ™‚ä¾¡ç·é¡ (Market Capitalization)
```
æ™‚ä¾¡ç·é¡ (ç™¾ä¸‡å††) = æ±ºç®—æ—¥æ ªä¾¡ (å††) Ã— ç™ºè¡Œæ¸ˆæ ªå¼æ•° (æ ª)
```
- **æ ªä¾¡ã‚½ãƒ¼ã‚¹**: `data/prices/{è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰}.csv`ï¼ˆçµ‚å€¤ãƒ™ãƒ¼ã‚¹ï¼‰
- **ç™ºè¡Œæ¸ˆæ ªå¼æ•°ã‚½ãƒ¼ã‚¹**: BS.csv `TotalNumberOfIssuedSharesSummaryOfBusinessResults`
- **æ³¨æ„**: JERAã¯éä¸Šå ´ã®ãŸã‚æ™‚ä¾¡ç·é¡è¨ˆç®—ä¸å¯ï¼ˆnullï¼‰

#### ç´”æœ‰åˆ©å­è² å‚µ (Net Debt)
```
ç´”æœ‰åˆ©å­è² å‚µ (ç™¾ä¸‡å††) = æœ‰åˆ©å­è² å‚µ - ç¾é‡‘åŠã³é é‡‘
```
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: BS.csv `BondsPayable` + `LongTermLoansPayable` + `ShortTermLoansPayable` - `CashAndDeposits`

#### ä¼æ¥­ä¾¡å€¤ (Enterprise Value)
```
EV (ç™¾ä¸‡å††) = æ™‚ä¾¡ç·é¡ + ç´”æœ‰åˆ©å­è² å‚µ
```
- **æ³¨æ„**: æ™‚ä¾¡ç·é¡ãŒnullã®å ´åˆã€EVã‚‚null

#### EV/EBITDAå€ç‡
```
EV/EBITDA (å€) = ä¼æ¥­ä¾¡å€¤ / EBITDA
```
- **æ¡ä»¶**: EBITDA > 0 ã‹ã¤ EV â‰  null

#### PER (Price Earnings Ratio)
```
PER (å€) = æ™‚ä¾¡ç·é¡ / å½“æœŸç´”åˆ©ç›Š
```
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: æ™‚ä¾¡ç·é¡ Ã· PL.csv `ProfitLoss`
- **æ¡ä»¶**: å½“æœŸç´”åˆ©ç›Š > 0 ã‹ã¤ æ™‚ä¾¡ç·é¡ â‰  null

#### PBR (Price Book-value Ratio)
```
PBR (å€) = æ™‚ä¾¡ç·é¡ / è‡ªå·±è³‡æœ¬
```
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: æ™‚ä¾¡ç·é¡ Ã· BS.csv `Equity`
- **æ¡ä»¶**: è‡ªå·±è³‡æœ¬ > 0 ã‹ã¤ æ™‚ä¾¡ç·é¡ â‰  null

#### å–¶æ¥­ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ (Operating Cash Flow)
```
å–¶æ¥­CF (ç™¾ä¸‡å††) = CFè¨ˆç®—æ›¸ã®å–¶æ¥­æ´»å‹•ã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼
```
- **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: CF.csv `NetCashProvidedByUsedInOperatingActivities`
- **æ³¨æ„**: æ¨å®šå€¤ã¯ä½¿ç”¨ã›ãšã€å®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ä½¿ç”¨

**å˜ä½å¤‰æ›**:
- ã™ã¹ã¦ã®é‡‘é¡ãƒ‡ãƒ¼ã‚¿ã¯ã€Œç™¾ä¸‡å††ã€å˜ä½ã§å–å¾—å¾Œã€è¡¨ç¤ºæ™‚ã«ã€Œå„„å††ã€å˜ä½ã¸å¤‰æ›ï¼ˆÃ· 100ï¼‰

**ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼**:
- åˆ†æ¯ãŒ0ã®å ´åˆã¯è¨ˆç®—ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€çµæœã‚’nullã¨ã™ã‚‹
- æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„å ´åˆï¼ˆéä¸Šå ´ãƒ»ãƒ‡ãƒ¼ã‚¿æ¬ æï¼‰ã¯ã€æ™‚ä¾¡ç·é¡ãŠã‚ˆã³ãã‚Œã«ä¾å­˜ã™ã‚‹æŒ‡æ¨™ã‚’nullã¨ã™ã‚‹
- è¨ˆç®—å¼ã«æ¨å®šå€¤ã‚„ä»®å®šå€¤ã¯å«ã¾ãªã„ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ä½¿ç”¨ï¼‰

### 2. KPIã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `scripts/compute_scores.py`

**ãƒ­ã‚¸ãƒƒã‚¯**:

- **ROE**: å½“æœŸç´”åˆ©ç›Š Ã· è‡ªå·±è³‡æœ¬ Ã— 100
- **è‡ªå·±è³‡æœ¬æ¯”ç‡**: è‡ªå·±è³‡æœ¬ Ã· ç·è³‡ç”£ Ã— 100
- **DSCR**: å–¶æ¥­CF Ã· (1å¹´å†…è¿”æ¸ˆäºˆå®šã®å›ºå®šè² å‚µ + æ”¯æ‰•åˆ©æ¯)

**è©•ä¾¡**: `data/kpi_targets.json` ã®é–¾å€¤ã«åŸºã¥ã„ã¦ Green/Yellow/Red ã‚’åˆ¤å®š

### 3. EDINETãƒ‡ãƒ¼ã‚¿å–å¾—

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `scripts/fetch_edinet.py`

**æ©Ÿèƒ½**:

- EDINET API v2 ã‚’ä½¿ç”¨
- æ›¸é¡ä¸€è¦§APIã§æœ‰ä¾¡è¨¼åˆ¸å ±å‘Šæ›¸ã‚’æ¤œç´¢
- æ›¸é¡å–å¾—APIã§XBRL ZIPã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- `--ci` ãƒ•ãƒ©ã‚°: 7æœˆ1æ—¥ä»¥å¤–ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼ˆGitHub Actionsç”¨ï¼‰
- ã‚³ãƒ¼ãƒ‰130ï¼ˆè¨‚æ­£å ±å‘Šæ›¸ï¼‰ã®é™¤å¤–ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…æ¸ˆã¿

### 4. XBRLè§£æ

**ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `scripts/parse_edinet_xbrl.py`

**æ©Ÿèƒ½**:

- `lxml` ã‚’ä½¿ç”¨ã—ã¦XBRLã‚’ãƒ‘ãƒ¼ã‚¹
- `jppfs` (è²¡å‹™è«¸è¡¨) ãŠã‚ˆã³ `jpcrp` (ä¼æ¥­æƒ…å ±) åå‰ç©ºé–“ã«å¯¾å¿œ
- ç™ºè¡Œæ¸ˆæ ªå¼æ•°ã®å–å¾—ãƒ­ã‚¸ãƒƒã‚¯å¼·åŒ–ï¼ˆè¤‡æ•°ã®ã‚¿ã‚°ãƒ»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¤œç´¢ï¼‰
- JSONãŠã‚ˆã³CSVå½¢å¼ã§å‡ºåŠ›

---

## ãƒ†ã‚¹ãƒˆä»•æ§˜

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: Vitest
- **E2Eãƒ†ã‚¹ãƒˆ**: Playwright

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: ãƒ•ãƒƒã‚¯ã€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°

```typescript
// hooks/useScores.test.ts
describe('useScores', () => {
  it('should fetch and return scores', async () => {
    // ...
  })
})
```

### E2Eãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: ç”»é¢è¡¨ç¤ºã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

```typescript
// tests/e2e/trend-display.spec.ts
test('Trend chart displays correctly', async ({ page }) => {
  await page.goto('/');
  await expect(page.locator('.recharts-surface')).toBeVisible();
});
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜

### GitHub Pagesè¨­å®š

#### 1. Settings â†’ Pages è¨­å®š

1. ãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã‹ã‚‰ã€ŒSettingsã€ã‚¿ãƒ–ã‚’é–‹ã
2. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€ŒPagesã€ã‚’é¸æŠ
3. **Source**: ã€ŒGitHub Actionsã€ã‚’é¸æŠ
4. Save

#### 2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è¨­å®š

**ãƒ•ã‚¡ã‚¤ãƒ«**: `.github/workflows/deploy-pages.yml`

- **ãƒˆãƒªã‚¬ãƒ¼**: mainãƒ–ãƒ©ãƒ³ãƒã¸ã®push
- **ã‚¸ãƒ§ãƒ–**:
  - `build`: npm ci, npm run build, ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
  - `deploy`: GitHub Pagesã¸ãƒ‡ãƒ—ãƒ­ã‚¤
- **ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼**: `public/data/*.json` ã®å­˜åœ¨ã‚’ãƒã‚§ãƒƒã‚¯

### vite.config.tsè¨­å®š

```typescript
export default defineConfig({
  base: '/ValueScope/',
  // ...
})
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: `public/data/*.json` ãŒå­˜åœ¨ã—ãªã„ã‹ã€å½¢å¼ãŒä¸æ­£

**è§£æ±º**:
1. `py scripts/build_valuation.py` ç­‰ã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å†ç”Ÿæˆ
2. `public/data/` ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ fetch ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª

### å•é¡Œ2: EV/MarketCapãŒç©ºï¼ˆnullï¼‰ã«ãªã‚‹

**åŸå› **: XBRLè§£æã§ç™ºè¡Œæ¸ˆæ ªå¼æ•°ãŒå–å¾—ã§ãã¦ã„ãªã„ï¼ˆ0.0ã«ãªã‚‹ï¼‰

**è§£æ±º**:
1. `scripts/parse_edinet_xbrl.py` ã® `extract_value_from_xbrl` ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç¢ºèª
2. `jpcrp` åå‰ç©ºé–“ã‚„ä»£æ›¿ã‚¿ã‚°ï¼ˆ`TotalNumberOfIssuedSharesSummaryOfBusinessResults` ç­‰ï¼‰ãŒæ¤œç´¢å¯¾è±¡ã«å«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’å®Ÿè¡Œã—ç›´ã™

### å•é¡Œ3: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

**åŸå› **: TypeScriptã®å‹ã‚¨ãƒ©ãƒ¼

**è§£æ±º**: `npx tsc --noEmit` ã§ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ã‚’ç‰¹å®šã—ä¿®æ­£

---

## ä»˜éŒ²

### A. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

(ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‚ç…§)

### B. å‚è€ƒãƒªãƒ³ã‚¯

- **æœ¬ç•ªURL**: https://j1921604.github.io/ValueScope/
- **GitHubãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/J1921604/ValueScope
